---
title: "Day012 - 380. Insert Delete GetRandom O(1) "
categories:
  - leetcode_150
toc: true
toc_sticky: true
tock_label: "List"
typora-root-url: ../
---


# [238. Product of Array Except Self](https://leetcode.com/problems/product-of-array-except-self/)

Given an integer array `nums`, return *an array* `answer` *such that* `answer[i]` *is equal to the product of all the elements of* `nums` *except* `nums[i]`.

The product of any prefix or suffix of `nums` is **guaranteed** to fit in a **32-bit** integer.

You must write an algorithm that runs in `O(n)` time and without using the division operation.

 

**Example 1:**

```
Input: nums = [1,2,3,4]
Output: [24,12,8,6]
```

**Example 2:**

```
Input: nums = [-1,1,0,-3,3]
Output: [0,0,9,0,0]
```

 

**Constraints:**

- `2 <= nums.length <= 105`
- `-30 <= nums[i] <= 30`
- The product of any prefix or suffix of `nums` is **guaranteed** to fit in a **32-bit** integer.

 

**Follow up:** Can you solve the problem in `O(1)` extra space complexity? (The output array **does not** count as extra space for space complexity analysis.)

<br>

- **내 풀이**

```python
import random

class RandomizedSet:
    def __init__(self):
        self.val_list = []
        self.idx_dict = {}

    def insert(self, val: int) -> bool:
        if val not in self.idx_dict:
            self.val_list.append(val) # val_list에 val을 append
            self.idx_dict[val] = len(self.val_list) - 1 # index 정보를 value로 저장
            return True
        else:
            return False

    def remove(self, val: int) -> bool:
        if val in self.idx_dict:
            remove_idx = self.idx_dict[val]
            last_val = self.val_list[-1]
            
            self.val_list[remove_idx] = last_val
            self.idx_dict[last_val] = remove_idx

            self.val_list.pop()
            del self.idx_dict[val]
    
            return True
        else:
            return False

    def getRandom(self) -> int:
        random_idx = random.randrange(0, len(self.val_list))
        return self.val_list[random_idx]
```

이



**\# Time Complexity  : $$O(N)$$** 

<br>



<br>

